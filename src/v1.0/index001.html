<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <div id="app">
        <h1>{{name}}</h1>    
        <h1>{{age}}{{name}}</h1> 
        <h1>{{age}}{{age}}</h1> 


        <div>
            <div>
                <div>
                    <h1>{{name}}</h1>
                </div>
            </div>
        </div>
        <div>
            <p>{{name}}</p>
        </div>
    </div>
    
</body>

<script type="text/javascript">

        let data = {
            name : "shiyi",
            age: 12
        };

        let app = document.querySelector("#app");
        
        console.log(app);

        replaceTag(app);

        function replaceTag(node){
             let childNodes = node.childNodes;   
             childNodes.forEach(element => {
                  let type = element.nodeType;  
                  let tagName = element.tagName;
                  if(type  === 1){
                      // 元素节点
                      replaceTag(element);  
                  }else if (type  === 3){
                     console.log(type +"  "+ tagName);  

                     // 文本节点
                     let innerText  = element.nodeValue;
                     if(innerText.indexOf("{{")>-1 && innerText.indexOf("}}")>-1 ){
                        let tag =  innerText.replace("{{","").replace("}}","");
                        // console.log(data);    
                        if(data[tag]){
                            element.nodeValue =  data[tag]        
                        }
                     }   
                  }  
             });   
        }



</script>

</html>